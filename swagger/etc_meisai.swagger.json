{
  "swagger": "2.0",
  "info": {
    "title": "etc_meisai.proto",
    "version": "version not set"
  },
  "tags": [
    {
      "name": "ETCMeisaiService"
    }
  ],
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "paths": {
    "/api/v1/etc-meisai/import": {
      "post": {
        "summary": "CSVインポート（単一リクエスト）",
        "operationId": "ETCMeisaiService_ImportCSV",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1ImportCSVResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/v1ImportCSVRequest"
            }
          }
        ],
        "tags": [
          "ETCMeisaiService"
        ]
      }
    },
    "/api/v1/etc-meisai/import-sessions": {
      "get": {
        "summary": "インポートセッション一覧取得",
        "operationId": "ETCMeisaiService_ListImportSessions",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1ListImportSessionsResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "required": false,
            "type": "integer",
            "format": "int32"
          },
          {
            "name": "page_size",
            "in": "query",
            "required": false,
            "type": "integer",
            "format": "int32"
          },
          {
            "name": "account_type",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "account_id",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "status",
            "in": "query",
            "required": false,
            "type": "string",
            "enum": [
              "IMPORT_STATUS_UNSPECIFIED",
              "IMPORT_STATUS_PENDING",
              "IMPORT_STATUS_PROCESSING",
              "IMPORT_STATUS_COMPLETED",
              "IMPORT_STATUS_FAILED",
              "IMPORT_STATUS_CANCELLED"
            ],
            "default": "IMPORT_STATUS_UNSPECIFIED"
          }
        ],
        "tags": [
          "ETCMeisaiService"
        ]
      }
    },
    "/api/v1/etc-meisai/import-sessions/{session_id}": {
      "get": {
        "summary": "インポートセッション取得",
        "operationId": "ETCMeisaiService_GetImportSession",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1GetImportSessionResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "session_id",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "tags": [
          "ETCMeisaiService"
        ]
      }
    },
    "/api/v1/etc-meisai/mappings": {
      "get": {
        "summary": "マッピング一覧取得",
        "operationId": "ETCMeisaiService_ListMappings",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1ListMappingsResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "required": false,
            "type": "integer",
            "format": "int32"
          },
          {
            "name": "page_size",
            "in": "query",
            "required": false,
            "type": "integer",
            "format": "int32"
          },
          {
            "name": "etc_record_id",
            "in": "query",
            "required": false,
            "type": "string",
            "format": "int64"
          },
          {
            "name": "mapping_type",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "mapped_entity_type",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "mapped_entity_id",
            "in": "query",
            "required": false,
            "type": "string",
            "format": "int64"
          },
          {
            "name": "status",
            "in": "query",
            "required": false,
            "type": "string",
            "enum": [
              "MAPPING_STATUS_UNSPECIFIED",
              "MAPPING_STATUS_ACTIVE",
              "MAPPING_STATUS_INACTIVE",
              "MAPPING_STATUS_PENDING",
              "MAPPING_STATUS_REJECTED"
            ],
            "default": "MAPPING_STATUS_UNSPECIFIED"
          }
        ],
        "tags": [
          "ETCMeisaiService"
        ]
      },
      "post": {
        "summary": "マッピング作成",
        "operationId": "ETCMeisaiService_CreateMapping",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1CreateMappingResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "mapping",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/v1ETCMapping"
            }
          }
        ],
        "tags": [
          "ETCMeisaiService"
        ]
      }
    },
    "/api/v1/etc-meisai/mappings/{id}": {
      "get": {
        "summary": "マッピング取得",
        "operationId": "ETCMeisaiService_GetMapping",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1GetMappingResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "type": "string",
            "format": "int64"
          }
        ],
        "tags": [
          "ETCMeisaiService"
        ]
      },
      "delete": {
        "summary": "マッピング削除",
        "operationId": "ETCMeisaiService_DeleteMapping",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "type": "object",
              "properties": {}
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "type": "string",
            "format": "int64"
          }
        ],
        "tags": [
          "ETCMeisaiService"
        ]
      },
      "put": {
        "summary": "マッピング更新",
        "operationId": "ETCMeisaiService_UpdateMapping",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1UpdateMappingResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "type": "string",
            "format": "int64"
          },
          {
            "name": "mapping",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/v1ETCMapping"
            }
          }
        ],
        "tags": [
          "ETCMeisaiService"
        ]
      }
    },
    "/api/v1/etc-meisai/records": {
      "get": {
        "summary": "ETC明細レコード一覧取得",
        "operationId": "ETCMeisaiService_ListRecords",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1ListRecordsResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "required": false,
            "type": "integer",
            "format": "int32"
          },
          {
            "name": "page_size",
            "in": "query",
            "required": false,
            "type": "integer",
            "format": "int32"
          },
          {
            "name": "sort_by",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "sort_order",
            "in": "query",
            "required": false,
            "type": "string",
            "enum": [
              "SORT_ORDER_UNSPECIFIED",
              "SORT_ORDER_ASC",
              "SORT_ORDER_DESC"
            ],
            "default": "SORT_ORDER_UNSPECIFIED"
          },
          {
            "name": "date_from",
            "description": "フィルタ条件\n\nYYYY-MM-DD",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "date_to",
            "description": "YYYY-MM-DD",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "car_number",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "etc_card_number",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "entrance_ic",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "exit_ic",
            "in": "query",
            "required": false,
            "type": "string"
          }
        ],
        "tags": [
          "ETCMeisaiService"
        ]
      },
      "post": {
        "summary": "ETC明細レコード作成",
        "operationId": "ETCMeisaiService_CreateRecord",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1CreateRecordResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "record",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/v1ETCMeisaiRecord"
            }
          }
        ],
        "tags": [
          "ETCMeisaiService"
        ]
      }
    },
    "/api/v1/etc-meisai/records/{id}": {
      "get": {
        "summary": "ETC明細レコード取得",
        "operationId": "ETCMeisaiService_GetRecord",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1GetRecordResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "type": "string",
            "format": "int64"
          }
        ],
        "tags": [
          "ETCMeisaiService"
        ]
      },
      "delete": {
        "summary": "ETC明細レコード削除",
        "operationId": "ETCMeisaiService_DeleteRecord",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "type": "object",
              "properties": {}
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "type": "string",
            "format": "int64"
          }
        ],
        "tags": [
          "ETCMeisaiService"
        ]
      },
      "put": {
        "summary": "ETC明細レコード更新",
        "operationId": "ETCMeisaiService_UpdateRecord",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1UpdateRecordResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "type": "string",
            "format": "int64"
          },
          {
            "name": "record",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/v1ETCMeisaiRecord"
            }
          }
        ],
        "tags": [
          "ETCMeisaiService"
        ]
      }
    },
    "/api/v1/etc-meisai/statistics": {
      "get": {
        "summary": "統計情報取得",
        "operationId": "ETCMeisaiService_GetStatistics",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1GetStatisticsResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "date_from",
            "description": "YYYY-MM-DD",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "date_to",
            "description": "YYYY-MM-DD",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "car_number",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "etc_card_number",
            "in": "query",
            "required": false,
            "type": "string"
          }
        ],
        "tags": [
          "ETCMeisaiService"
        ]
      }
    }
  },
  "definitions": {
    "protobufAny": {
      "type": "object",
      "properties": {
        "@type": {
          "type": "string"
        }
      },
      "additionalProperties": {}
    },
    "protobufNullValue": {
      "type": "string",
      "enum": [
        "NULL_VALUE"
      ],
      "default": "NULL_VALUE",
      "description": "`NullValue` is a singleton enumeration to represent the null value for the\n`Value` type union.\n\nThe JSON representation for `NullValue` is JSON `null`.\n\n - NULL_VALUE: Null value."
    },
    "rpcStatus": {
      "type": "object",
      "properties": {
        "code": {
          "type": "integer",
          "format": "int32"
        },
        "message": {
          "type": "string"
        },
        "details": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/protobufAny"
          }
        }
      }
    },
    "v1CreateMappingResponse": {
      "type": "object",
      "properties": {
        "mapping": {
          "$ref": "#/definitions/v1ETCMapping"
        }
      }
    },
    "v1CreateRecordResponse": {
      "type": "object",
      "properties": {
        "record": {
          "$ref": "#/definitions/v1ETCMeisaiRecord"
        }
      }
    },
    "v1DailyStatistics": {
      "type": "object",
      "properties": {
        "date": {
          "type": "string"
        },
        "record_count": {
          "type": "integer",
          "format": "int32"
        },
        "total_amount": {
          "type": "string",
          "format": "int64"
        }
      }
    },
    "v1ETCMapping": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "format": "int64"
        },
        "etc_record_id": {
          "type": "string",
          "format": "int64"
        },
        "etc_record": {
          "$ref": "#/definitions/v1ETCMeisaiRecord"
        },
        "mapping_type": {
          "type": "string"
        },
        "mapped_entity_id": {
          "type": "string",
          "format": "int64"
        },
        "mapped_entity_type": {
          "type": "string"
        },
        "confidence": {
          "type": "number",
          "format": "float"
        },
        "status": {
          "$ref": "#/definitions/v1MappingStatus"
        },
        "metadata": {
          "type": "object"
        },
        "created_by": {
          "type": "string"
        },
        "created_at": {
          "type": "string",
          "format": "date-time"
        },
        "updated_at": {
          "type": "string",
          "format": "date-time"
        }
      },
      "title": "マッピング情報"
    },
    "v1ETCMeisaiRecord": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "format": "int64"
        },
        "hash": {
          "type": "string"
        },
        "date": {
          "type": "string",
          "title": "YYYY-MM-DD format"
        },
        "time": {
          "type": "string",
          "title": "HH:MM:SS format"
        },
        "entrance_ic": {
          "type": "string"
        },
        "exit_ic": {
          "type": "string"
        },
        "toll_amount": {
          "type": "integer",
          "format": "int32"
        },
        "car_number": {
          "type": "string"
        },
        "etc_card_number": {
          "type": "string"
        },
        "etc_num": {
          "type": "string"
        },
        "dtako_row_id": {
          "type": "string",
          "format": "int64"
        },
        "created_at": {
          "type": "string",
          "format": "date-time"
        },
        "updated_at": {
          "type": "string",
          "format": "date-time"
        }
      },
      "title": "ETC明細レコード"
    },
    "v1GetImportSessionResponse": {
      "type": "object",
      "properties": {
        "session": {
          "$ref": "#/definitions/v1ImportSession"
        }
      }
    },
    "v1GetMappingResponse": {
      "type": "object",
      "properties": {
        "mapping": {
          "$ref": "#/definitions/v1ETCMapping"
        }
      }
    },
    "v1GetRecordResponse": {
      "type": "object",
      "properties": {
        "record": {
          "$ref": "#/definitions/v1ETCMeisaiRecord"
        }
      }
    },
    "v1GetStatisticsResponse": {
      "type": "object",
      "properties": {
        "total_records": {
          "type": "string",
          "format": "int64"
        },
        "total_amount": {
          "type": "string",
          "format": "int64"
        },
        "unique_cars": {
          "type": "integer",
          "format": "int32"
        },
        "unique_cards": {
          "type": "integer",
          "format": "int32"
        },
        "daily_stats": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/v1DailyStatistics"
          }
        },
        "ic_stats": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/v1ICStatistics"
          }
        }
      }
    },
    "v1ICStatistics": {
      "type": "object",
      "properties": {
        "ic_name": {
          "type": "string"
        },
        "usage_count": {
          "type": "integer",
          "format": "int32"
        },
        "ic_type": {
          "type": "string",
          "title": "entrance or exit"
        }
      }
    },
    "v1ImportCSVRequest": {
      "type": "object",
      "properties": {
        "account_type": {
          "type": "string"
        },
        "account_id": {
          "type": "string"
        },
        "file_name": {
          "type": "string"
        },
        "file_content": {
          "type": "string",
          "format": "byte"
        }
      },
      "title": "CSVインポート（単一リクエスト）"
    },
    "v1ImportCSVResponse": {
      "type": "object",
      "properties": {
        "session": {
          "$ref": "#/definitions/v1ImportSession"
        }
      }
    },
    "v1ImportError": {
      "type": "object",
      "properties": {
        "row_number": {
          "type": "integer",
          "format": "int32"
        },
        "error_type": {
          "type": "string"
        },
        "error_message": {
          "type": "string"
        },
        "raw_data": {
          "type": "string"
        }
      },
      "title": "インポートエラー"
    },
    "v1ImportProgress": {
      "type": "object",
      "properties": {
        "session_id": {
          "type": "string"
        },
        "processed_rows": {
          "type": "integer",
          "format": "int32"
        },
        "success_rows": {
          "type": "integer",
          "format": "int32"
        },
        "error_rows": {
          "type": "integer",
          "format": "int32"
        },
        "duplicate_rows": {
          "type": "integer",
          "format": "int32"
        },
        "progress_percentage": {
          "type": "number",
          "format": "float"
        },
        "error_message": {
          "type": "string"
        },
        "status": {
          "$ref": "#/definitions/v1ImportStatus"
        }
      }
    },
    "v1ImportSession": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "title": "UUID"
        },
        "account_type": {
          "type": "string"
        },
        "account_id": {
          "type": "string"
        },
        "file_name": {
          "type": "string"
        },
        "file_size": {
          "type": "string",
          "format": "int64"
        },
        "status": {
          "$ref": "#/definitions/v1ImportStatus"
        },
        "total_rows": {
          "type": "integer",
          "format": "int32"
        },
        "processed_rows": {
          "type": "integer",
          "format": "int32"
        },
        "success_rows": {
          "type": "integer",
          "format": "int32"
        },
        "error_rows": {
          "type": "integer",
          "format": "int32"
        },
        "duplicate_rows": {
          "type": "integer",
          "format": "int32"
        },
        "started_at": {
          "type": "string",
          "format": "date-time"
        },
        "completed_at": {
          "type": "string",
          "format": "date-time"
        },
        "error_log": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/v1ImportError"
          }
        },
        "created_by": {
          "type": "string"
        },
        "created_at": {
          "type": "string",
          "format": "date-time"
        }
      },
      "title": "インポートセッション"
    },
    "v1ImportStatus": {
      "type": "string",
      "enum": [
        "IMPORT_STATUS_UNSPECIFIED",
        "IMPORT_STATUS_PENDING",
        "IMPORT_STATUS_PROCESSING",
        "IMPORT_STATUS_COMPLETED",
        "IMPORT_STATUS_FAILED",
        "IMPORT_STATUS_CANCELLED"
      ],
      "default": "IMPORT_STATUS_UNSPECIFIED",
      "title": "インポートステータス"
    },
    "v1ListImportSessionsResponse": {
      "type": "object",
      "properties": {
        "sessions": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/v1ImportSession"
          }
        },
        "total_count": {
          "type": "integer",
          "format": "int32"
        },
        "page": {
          "type": "integer",
          "format": "int32"
        },
        "page_size": {
          "type": "integer",
          "format": "int32"
        }
      }
    },
    "v1ListMappingsResponse": {
      "type": "object",
      "properties": {
        "mappings": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/v1ETCMapping"
          }
        },
        "total_count": {
          "type": "integer",
          "format": "int32"
        },
        "page": {
          "type": "integer",
          "format": "int32"
        },
        "page_size": {
          "type": "integer",
          "format": "int32"
        }
      }
    },
    "v1ListRecordsResponse": {
      "type": "object",
      "properties": {
        "records": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/v1ETCMeisaiRecord"
          }
        },
        "total_count": {
          "type": "integer",
          "format": "int32"
        },
        "page": {
          "type": "integer",
          "format": "int32"
        },
        "page_size": {
          "type": "integer",
          "format": "int32"
        }
      }
    },
    "v1MappingStatus": {
      "type": "string",
      "enum": [
        "MAPPING_STATUS_UNSPECIFIED",
        "MAPPING_STATUS_ACTIVE",
        "MAPPING_STATUS_INACTIVE",
        "MAPPING_STATUS_PENDING",
        "MAPPING_STATUS_REJECTED"
      ],
      "default": "MAPPING_STATUS_UNSPECIFIED",
      "title": "マッピングステータス"
    },
    "v1SortOrder": {
      "type": "string",
      "enum": [
        "SORT_ORDER_UNSPECIFIED",
        "SORT_ORDER_ASC",
        "SORT_ORDER_DESC"
      ],
      "default": "SORT_ORDER_UNSPECIFIED"
    },
    "v1UpdateMappingResponse": {
      "type": "object",
      "properties": {
        "mapping": {
          "$ref": "#/definitions/v1ETCMapping"
        }
      }
    },
    "v1UpdateRecordResponse": {
      "type": "object",
      "properties": {
        "record": {
          "$ref": "#/definitions/v1ETCMeisaiRecord"
        }
      }
    }
  }
}
